/* 
 * 消防救援预案管理平台系统
 * 二三维开发组件包 ccgis
 * @Auther gaozhiqian
 * @Version 1.0
 * 
 */
(()=>{"use strict";var t={923:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){
return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=/^class /;function r(e){return"[object Array]"===Object.prototype.toString.call(e)}function o(){var e=Array.prototype.slice.call(arguments)
;1===e.length&&r(e[0])&&(e=e[0]);var t=e.pop();return t.$inject=e,t}var a=/constructor\s*[^(]*\(\s*([^)]*)\)/m,u=/^function\s*[^(]*\(\s*([^)]*)\)/m,s=/\/\*([^*]*)\*\//m;function l(e){
if("function"!=typeof e)throw new Error('Cannot annotate "'+e+'". Expected a function!');var t=e.toString().match(function(e){return i.test(e.toString())}(e)?a:u);return t&&t[1]&&t[1].split(",").map((function(e){return(t=e.match(s))?t[1].trim():e.trim()
}))||[]}function c(){var e=[];this.factory=function(t,n){return e.push([t,"factory",n]),this},this.value=function(t,n){return e.push([t,"value",n]),this},this.type=function(t,n){return e.push([t,"type",n]),this},this.forEach=function(t){e.forEach(t)}}
var f="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return void 0===e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":n(e)}
;function p(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function m(e,t){return Object.hasOwnProperty.call(e,t)}t.annotate=o,t.Module=c,t.Injector=function e(t,n){n=n||{get:function(e,t){
if(i.push(e),!1===t)return null;throw d('No provider for "'+e+'"!')}};var i=[],a=this._providers=Object.create(n._providers||null),u=this._instances=Object.create(null),s=u.injector=this,d=function(e){var t=i.join(" -> ");return i.length=0,
new Error(t?e+" (Resolving: "+t+")":e)},y=function e(t,r){if(!a[t]&&-1!==t.indexOf(".")){for(var o=t.split("."),s=e(o.shift());o.length;)s=s[o.shift()];return s}if(m(u,t))return u[t];if(m(a,t)){if(-1!==i.indexOf(t))throw i.push(t),
d("Cannot resolve circular dependency!");return i.push(t),u[t]=a[t][0](a[t][1]),i.pop(),u[t]}return n.get(t,r)},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("function"!=typeof e){
if(!r(e))throw new Error('Cannot invoke "'+e+'". Expected a function!');e=o(e.slice())}var n=e.$inject||l(e),i=n.map((function(e){return m(t,e)?t[e]:y(e)}));return{fn:e,dependencies:i}},v=function(e){var t=h(e),n=t.dependencies,i=t.fn
;return new(Function.prototype.bind.apply(i,[null].concat(p(n))))},C=function(e,t,n){var i=h(e,n),r=i.dependencies,o=i.fn;return o.call.apply(o,[t].concat(p(r)))},_=function(e){return o((function(t){return e.get(t)}))},g={factory:C,type:v,
value:function(e){return e}};t.forEach((function(t){function n(e,t){return"value"!==e&&r(t)&&(t=o(t.slice())),t}if(t instanceof c)t.forEach((function(e){var t=e[0],i=e[1],r=e[2];a[t]=[g[i],n(i,r),i]
}));else if("object"===(void 0===t?"undefined":f(t)))if(t.__exports__){var i=Object.keys(t).reduce((function(e,n){return"__"!==n.substring(0,2)&&(e[n]=t[n]),e}),Object.create(null)),u=new e((t.__modules__||[]).concat([i]),s),l=o((function(e){
return u.get(e)}));t.__exports__.forEach((function(e){a[e]=[l,e,"private",u]}))}else Object.keys(t).forEach((function(e){if("private"!==t[e][2]){var i=t[e][0],r=t[e][1];a[e]=[g[i],n(i,r),i]}else a[e]=t[e]}))})),this.get=y,this.invoke=C,this.instantiate=v,
this.createChild=function(t,n){if(n&&n.length){var i,r,o,u,l=Object.create(null),c=Object.create(null),f=[],p=[],m=[];for(var d in a)i=a[d],-1!==n.indexOf(d)&&("private"===i[2]?-1===(r=f.indexOf(i[3]))?(o=i[3].createChild([],n),u=_(o),f.push(i[3]),
p.push(o),m.push(u),l[d]=[u,d,"private",o]):l[d]=[m[r],d,"private",p[r]]:l[d]=[i[2],i[1]],c[d]=!0),"factory"!==i[2]&&"type"!==i[2]||!i[1].$scope||n.forEach((function(e){-1!==i[1].$scope.indexOf(e)&&(l[d]=[i[2],i[1]],c[e]=!0)}));n.forEach((function(e){
if(!c[e])throw new Error('No provider for "'+e+'". Cannot use provider from the parent!')})),t.unshift(l)}return new e(t,s)}}},8342:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=Object.prototype.toString,i=Object.prototype.hasOwnProperty
;function r(e){return void 0===e}function o(e){return"[object Array]"===n.call(e)}function a(e){return"[object Object]"===n.call(e)}function u(e){var t=n.call(e)
;return"[object Function]"===t||"[object AsyncFunction]"===t||"[object GeneratorFunction]"===t||"[object AsyncGeneratorFunction]"===t||"[object Proxy]"===t}function s(e){if(!o(e))throw new Error("must supply array")}function l(e,t){return i.call(e,t)}
function c(e,t){var n;return t=g(t),f(e,(function(e,i){if(t(e,i))return n=e,!1})),n}function f(e,t){var n;if(!r(e)){var i=o(e)?P:w;for(var a in e)if(l(e,a)&&!1===t(n=e[a],i(a)))return n}}function p(e,t,n){return f(e,(function(e,i){n=t(n,e,i)})),n}
function m(e,t){return!!p(e,(function(e,n,i){return e&&t(n,i)}),!0)}function d(e,t){var n=[];return f(e,(function(e,i){n.push(t(e,i))})),n}function y(e){return e&&Object.keys(e)||[]}function h(e,t){
var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t=_(t),f(e,(function(e){var i=t(e)||"_",r=n[i];r||(r=n[i]=[]),r.push(e)})),n}function v(e){e=_(e);for(var t={},n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r]
;f(i,(function(n){return h(n,e,t)}));var o=d(t,(function(e,t){return e[0]}));return o}var C=v;function _(e){return u(e)?e:function(t){return t[e]}}function g(e){return u(e)?e:function(t){return t===e}}function w(e){return e}function P(e){return Number(e)}
function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}t.flatten=function(e){
return Array.prototype.concat.apply([],e)},t.find=c,t.findIndex=function(e,t){t=g(t);var n=o(e)?-1:void 0;return f(e,(function(e,i){if(t(e,i))return n=i,!1})),n},t.filter=function(e,t){var n=[];return f(e,(function(e,i){t(e,i)&&n.push(e)})),n},t.forEach=f,
t.without=function(e,t){return r(e)?[]:(s(e),t=g(t),e.filter((function(e,n){return!t(e,n)})))},t.reduce=p,t.every=m,t.some=function(e,t){return!!c(e,t)},t.map=d,t.keys=y,t.size=function(e){return y(e).length},t.values=function(e){return d(e,(function(e){
return e}))},t.groupBy=h,t.uniqueBy=v,t.unionBy=C,t.sortBy=function(e,t){t=_(t);var n=[];return f(e,(function(e,i){for(var r=t(e,i),o={d:r,v:e},a=0;a<n.length;a++){if(r<n[a].d)return void n.splice(a,0,o)}n.push(o)})),d(n,(function(e){return e.v}))},
t.matchPattern=function(e){return function(t){return m(e,(function(e,n){return t[n]===e}))}},t.debounce=function(e,t){var n,i,r,o;function a(){var a=Date.now(),s=o+t-a;if(s>0)return u(s);e.apply(r,i),n=o=i=r=void 0}function u(e){n=setTimeout(a,e)}
return function(){o=Date.now();for(var e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];i=a,r=this,n||u(t)}},t.throttle=function(e,t){var n=!1;return function(){n||(e.apply(void 0,arguments),n=!0,setTimeout((function(){n=!1}),t))}},
t.bind=function(e,t){return e.bind(t)},t.isUndefined=r,t.isDefined=function(e){return void 0!==e},t.isNil=function(e){return null==e},t.isArray=o,t.isObject=a,t.isNumber=function(e){return"[object Number]"===n.call(e)},t.isFunction=u,
t.isString=function(e){return"[object String]"===n.call(e)},t.ensureArray=s,t.has=l,t.assign=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return x.apply(void 0,[e].concat(n))},t.pick=function(e,t){
var n={},i=Object(e);return f(t,(function(t){t in i&&(n[t]=e[t])})),n},t.omit=function(e,t){var n={};return f(Object(e),(function(e,i){-1===t.indexOf(i)&&(n[i]=e)})),n},t.merge=function e(t){
for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.length?(f(i,(function(n){n&&a(n)&&f(n,(function(n,i){if("__proto__"!==i){var r=t[i];a(n)?(a(r)||(r={}),t[i]=e(r,n)):t[i]=n}}))})),t):t}},7838:(e,t,n)=>{
Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var i,r=n(923),o=n(6565),a=(i=o)&&i.__esModule?i:{default:i};function u(e){var t=[],n=[];function i(e){return t.indexOf(e)>=0}e.forEach((function e(r){i(r)||((r.__depends__||[]).forEach(e),
i(r)||(!function(e){t.push(e)}(r),(r.__init__||[]).forEach((function(e){n.push(e)}))))}));var o=new r.Injector(t);return n.forEach((function(e){try{o["string"==typeof e?"get":"invoke"](e)}catch(e){throw console.error("Failed to instantiate component"),
console.error(e.stack),e}})),o}function s(e,t){console.log("\n\n %c 三维组件库 %c QQ9033288675 \n","color:#fff;border-radius:5px;background:#41b883;padding:5px 0;","color:#fff;border-radius:5px;background:#35495e;padding:5px 0;margin:0 2px"),
this.injector=t=t||function(e){return u([{"config":["value",e=e||{}]},a.default].concat(e.modules||[]))}(e),this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("FCG.init")}s.prototype.destroy=function(){this.get("eventBus").fire("FCG.destroy")},
s.prototype.clear=function(){this.get("eventBus").fire("FCG.clear")}},9148:(t,n)=>{function i(e,t){this._eventBus=t,this._init(e||{})}Object.defineProperty(n,"__esModule",{value:!0}),n.default=i,i.$inject=["config.cesium","eventBus"],
i.prototype._init=function(e){if(Cesium){var t=this._sceneid=e.sceneid;if(t){var n=this.viewer=new Cesium.Viewer(t,{geocoder:!1,timeline:!1,fullscreenButton:!1,infoBox:!1,animation:!0,selectionIndicator:!1,baseLayerPicker:!1,sceneModePicker:!1,
navigationHelpButton:!1,vrButton:!1,navigationInstructionsInitiallyVisible:!1,homeButton:!1,scene3DOnly:!1,shouldAnimate:!0,imageryProvider:new Cesium.SingleTileImageryProvider({url:"./static/images/imagery/earth_atmos_4096.jpg"})})
;n._cesiumWidget._creditContainer.style.display="none",n.animation.container.style.visibility="hidden",this.handler=new Cesium.ScreenSpaceEventHandler(n.scene.canvas)}}},i.prototype.open=function(e){if(Cesium){var t=this.viewer
;t.scene.primitives.add(new Cesium.Cesium3DTileset({url:e.url})).readyPromise.then((function(n){n&&e.success&&e.success(t)})).otherwise((function(e){console.log(e)}))}},i.prototype.openScene=function(t){if(Cesium){
var n=this.viewer,i=n.scene,r=n.cesiumWidget;try{var o=i.open(t.url);Cesium.when(o,(function(e){e&&t.success&&t.success(n)}),(function(){r.showErrorPanel("加载SCP失败，请检查网络连接状态或者url地址是否正确？",void 0,e)}))}catch(e){if(r._showRenderLoopErrors){
r.showErrorPanel("渲染时发生错误，已停止渲染。",void 0,e)}}}},i.prototype.addRadarScan=function(e,t){if(Cesium)return e.scene.globe.depthTestAgainstTerrain=!0,function(e,t,n,i,r){if(Cesium){
var o=Cesium.Cartographic.toCartesian(t),a=new Cesium.Cartesian4(o.x,o.y,o.z,1),u=new Cesium.Cartographic(t.longitude,t.latitude,t.height+500),s=Cesium.Cartographic.toCartesian(u),l=new Cesium.Cartesian4(s.x,s.y,s.z,1),c=new Cesium.Cartographic(t.longitude+Cesium.Math.toRadians(.001),t.latitude,t.height),f=Cesium.Cartographic.toCartesian(c),p=new Cesium.Cartesian4(f.x,f.y,f.z,1),m=new Cesium.Quaternion,d=new Cesium.Matrix3,y=(new Date).getTime(),h=new Cesium.Cartesian4,v=new Cesium.Cartesian4,C=new Cesium.Cartesian4,_=new Cesium.Cartesian3,g=new Cesium.Cartesian3,w=new Cesium.PostProcessStage({
fragmentShader:"uniform sampler2D colorTexture;\nuniform sampler2D depthTexture;\nvarying vec2 v_textureCoordinates;\nuniform vec4 u_scanCenterEC;\nuniform vec3 u_scanPlaneNormalEC;\nuniform vec3 u_scanLineNormalEC;\nuniform float u_radius;\nuniform vec4 u_scanColor;\nvec4 toEye(in vec2 uv, in float depth)\n {\n vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n vec4 posInCamera =czm_inverseProjection * vec4(xy, depth, 1.0);\n posInCamera =posInCamera / posInCamera.w;\n return posInCamera;\n }\nbool isPointOnLineRight(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt)\n{\nvec3 v01 = testPt - ptOnLine;\nnormalize(v01);\nvec3 temp = cross(v01, lineNormal);\nfloat d = dot(temp, u_scanPlaneNormalEC);\nreturn d > 0.5;\n}\nvec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point)\n{\nvec3 v01 = point -planeOrigin;\nfloat d = dot(planeNormal, v01) ;\nreturn (point - planeNormal * d);\n}\nfloat distancePointToLine(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt)\n{\nvec3 tempPt = pointProjectOnPlane(lineNormal, ptOnLine, testPt);\nreturn length(tempPt - ptOnLine);\n}\nfloat getDepth(in vec4 depth)\n{\nfloat z_window = czm_unpackDepth(depth);\nz_window = czm_reverseLogDepth(z_window);\nfloat n_range = czm_depthRange.near;\nfloat f_range = czm_depthRange.far;\nreturn (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n}\nvoid main()\n{\ngl_FragColor = texture2D(colorTexture, v_textureCoordinates);\nfloat depth = getDepth( texture2D(depthTexture, v_textureCoordinates));\nvec4 viewPos = toEye(v_textureCoordinates, depth);\nvec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);\nfloat dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);\nfloat twou_radius = u_radius * 2.0;\nif(dis < u_radius)\n{\nfloat f0 = 1.0 -abs(u_radius - dis) / u_radius;\nf0 = pow(f0, 64.0);\nvec3 lineEndPt = vec3(u_scanCenterEC.xyz) + u_scanLineNormalEC * u_radius;\nfloat f = 0.0;\nif(isPointOnLineRight(u_scanCenterEC.xyz, u_scanLineNormalEC.xyz, prjOnPlane.xyz))\n{\nfloat dis1= length(prjOnPlane.xyz - lineEndPt);\nf = abs(twou_radius -dis1) / twou_radius;\nf = pow(f, 3.0);\n}\ngl_FragColor = mix(gl_FragColor, u_scanColor, f + f0);\n}\n}\n",
uniforms:{u_scanCenterEC:function(){return Cesium.Matrix4.multiplyByVector(e.camera._viewMatrix,a,h)},u_scanPlaneNormalEC:function(){var t=Cesium.Matrix4.multiplyByVector(e.camera._viewMatrix,a,h),n=Cesium.Matrix4.multiplyByVector(e.camera._viewMatrix,l,v)
;return _.x=n.x-t.x,_.y=n.y-t.y,_.z=n.z-t.z,Cesium.Cartesian3.normalize(_,_),_},u_radius:n,u_scanLineNormalEC:function(){
var t=Cesium.Matrix4.multiplyByVector(e.camera._viewMatrix,a,h),n=Cesium.Matrix4.multiplyByVector(e.camera._viewMatrix,l,v),i=Cesium.Matrix4.multiplyByVector(e.camera._viewMatrix,p,C);_.x=n.x-t.x,_.y=n.y-t.y,_.z=n.z-t.z,Cesium.Cartesian3.normalize(_,_),
g.x=i.x-t.x,g.y=i.y-t.y,g.z=i.z-t.z;var o=((new Date).getTime()-y)%r/r;return Cesium.Quaternion.fromAxisAngle(_,o*Cesium.Math.PI*2,m),Cesium.Matrix3.fromQuaternion(m,d),Cesium.Matrix3.multiplyByVector(d,g,g),Cesium.Cartesian3.normalize(g,g),g},
u_scanColor:i}});return e.scene.postProcessStages.add(w),w}}(e,new Cesium.Cartographic(Cesium.Math.toRadians(t.lon),Cesium.Math.toRadians(t.lat),0),t.r,t.scanColor,t.interval)},i.prototype.addCircleScan=function(e,t){
if(Cesium)return e.scene.globe.depthTestAgainstTerrain=!0,function(e,t,n,i,r){if(Cesium){
var o=Cesium.Cartographic.toCartesian(t),a=new Cesium.Cartesian4(o.x,o.y,o.z,1),u=new Cesium.Cartographic(t.longitude,t.latitude,t.height+500),s=Cesium.Cartographic.toCartesian(u),l=new Cesium.Cartesian4(s.x,s.y,s.z,1),c=(new Date).getTime(),f=new Cesium.Cartesian4,p=new Cesium.Cartesian4,m=new Cesium.Cartesian3,d=new Cesium.PostProcessStage({
fragmentShader:"uniform sampler2D colorTexture;\nuniform sampler2D depthTexture;\nvarying vec2 v_textureCoordinates;\nuniform vec4 u_scanCenterEC;\nuniform vec3 u_scanPlaneNormalEC;\nuniform float u_radius;\nuniform vec4 u_scanColor;\nvec4 toEye(in vec2 uv, in float depth)\n {\n vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n vec4 posInCamera =czm_inverseProjection * vec4(xy, depth, 1.0);\n posInCamera =posInCamera / posInCamera.w;\n return posInCamera;\n }\nvec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point)\n{\nvec3 v01 = point -planeOrigin;\nfloat d = dot(planeNormal, v01) ;\nreturn (point - planeNormal * d);\n}\nfloat getDepth(in vec4 depth)\n{\nfloat z_window = czm_unpackDepth(depth);\nz_window = czm_reverseLogDepth(z_window);\nfloat n_range = czm_depthRange.near;\nfloat f_range = czm_depthRange.far;\nreturn (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n}\nvoid main()\n{\ngl_FragColor = texture2D(colorTexture, v_textureCoordinates);\nfloat depth = getDepth( texture2D(depthTexture, v_textureCoordinates));\nvec4 viewPos = toEye(v_textureCoordinates, depth);\nvec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);\nfloat dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);\nif(dis < u_radius)\n{\nfloat f = 1.0 -abs(u_radius - dis) / u_radius;\nf = pow(f, 4.0);\ngl_FragColor = mix(gl_FragColor, u_scanColor, f);\n}\n}\n",
uniforms:{u_scanCenterEC:function(){return Cesium.Matrix4.multiplyByVector(e.camera._viewMatrix,a,f)},u_scanPlaneNormalEC:function(){var t=Cesium.Matrix4.multiplyByVector(e.camera._viewMatrix,a,f),n=Cesium.Matrix4.multiplyByVector(e.camera._viewMatrix,l,p)
;return m.x=n.x-t.x,m.y=n.y-t.y,m.z=n.z-t.z,Cesium.Cartesian3.normalize(m,m),m},u_radius:function(){return n*(((new Date).getTime()-c)%r)/r},u_scanColor:i}});return e.scene.postProcessStages.add(d),d}
}(e,new Cesium.Cartographic(Cesium.Math.toRadians(t.lon),Cesium.Math.toRadians(t.lat),0),t.r,t.scanColor,t.interval)},i.prototype.createDynamicCricle=function(e){if(Cesium)return Object.defineProperties(t.prototype,{isConstant:{get:function(){return!1}},
definitionChanged:{get:function(){return this._definitionChanged}},color:Cesium.createPropertyDescriptor("color")}),t.prototype.getType=function(e){return"CircleWaveMaterial"},t.prototype.getValue=function(e,t){return Cesium.defined(t)||(t={}),
t.color=Cesium.Property.getValueOrClonedDefault(this._color,e,Cesium.Color.WHITE,t.color),t.time=(performance.now()-this._time)/this.duration,t.count=this.count,t.gradient=this.gradient,t},t.prototype.equals=function(e){
return this===e||e instanceof t&&Cesium.Property.equals(this._color,e._color)},Cesium.CircleWaveMaterialProperty=t,Cesium.Material.CircleWaveMaterialType="CircleWaveMaterial",
Cesium.Material.PolylineTrailSource="czm_material czm_getMaterial(czm_materialInput materialInput)\n\n                                        {\n\n                                            czm_material material = czm_getDefaultMaterial(materialInput);\n\n                                            material.diffuse = 1.5 * color.rgb;\n\n                                            vec2 st = materialInput.st;\n\n                                            vec3 str = materialInput.str;\n\n                                            float dis = distance(st, vec2(0.5, 0.5));\n\n                                            float per = fract(time);\n\n                                            if (abs(str.z) > 0.001) {\n\n                                                discard;\n\n                                            }\n\n                                            if (dis > 0.5) { \n\n                                                discard; \n\n                                            } else { \n\n                                                float perDis = 0.5 / count;\n\n                                                float disNum; \n                    \n                                                float bl = .0; \n                      \n                                                for (int i = 0; i <= 999; i++) { \n                           \n                                                    if (float(i) <= count) { \n                               \n                                                      disNum = perDis *float(i) - dis + per / count; \n                             \n                                                        if (disNum > 0.0) { \n                                 \n                                                            if (disNum < perDis) { bl = 1.0 - disNum / perDis;}  else if(disNum - perDis < perDis) {  bl = 1.0 - abs(1.0 - disNum / perDis);}    \n                            \n                                                            material.alpha = pow(bl, gradient); \n\n                                                        } \n\n                                                    } \n\n                                                } \n\n                                            } \n\n                                        return material; \n\n                                    } \n",
Cesium.Material._materialCache.addMaterial(Cesium.Material.CircleWaveMaterialType,{fabric:{type:Cesium.Material.CircleWaveMaterialType,uniforms:{color:new Cesium.Color(1,0,0,1),time:1,count:1,gradient:.1},source:Cesium.Material.PolylineTrailSource},
translucent:function(e){return!0}}),new Cesium.CircleWaveMaterialProperty;function t(){e=Cesium.defaultValue(e,Cesium.defaultValue.EMPTY_OBJECT),this._definitionChanged=new Cesium.Event,this._color=void 0,this._colorSubscription=void 0,this.color=e.color,
this.duration=Cesium.defaultValue(e.duration,1e3),this.count=Cesium.defaultValue(e.count,2),this.count<=0&&(this.count=1),this.gradient=Cesium.defaultValue(e.gradient,.1),this.gradient<0?this.gradient=0:this.gradient>1&&(this.gradient=1),
this._time=performance.now()}},i.prototype.earthRotation=function(e,t){if(Cesium){var n=Date.now();e.clock.onTick.addEventListener(i),e.camera.changed.addEventListener((function(){
Math.ceil(e.camera.positionCartographic.height)<t?e.clock.onTick.removeEventListener(i):e.clock.onTick.addEventListener(i)}))}function i(){var t=Date.now(),i=(t-n)/1e3;n=t,e.scene.camera.rotate(Cesium.Cartesian3.UNIT_Z,-.1*i)}},
i.prototype.createPolylineTrailLinkMaterial1=function(e){if(Cesium){if(null==Cesium.PolylineTrailLinkMaterialProperty){var t=function(e,t){this._definitionChanged=new Cesium.Event,this._color=void 0,this._colorSubscription=void 0,this.color=e,
this.duration=t,this._time=(new Date).getTime()};Object.defineProperties(t.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:Cesium.createPropertyDescriptor("color")}),
t.prototype.getType=function(e){return"PolylineTrailLink"},t.prototype.getValue=function(e,t){return Cesium.defined(t)||(t={}),t.color=Cesium.Property.getValueOrClonedDefault(this._color,e,Cesium.Color.WHITE,t.color),
t.image=Cesium.Material.PolylineTrailLinkImage,t.time=((new Date).getTime()-this._time)%this.duration/this.duration,t},t.prototype.equals=function(e){return this===e||e instanceof t&&Property.equals(this._color,e._color)},
Cesium.PolylineTrailLinkMaterialProperty=t,Cesium.Material.PolylineTrailLinkType="PolylineTrailLink",Cesium.Material.PolylineTrailLinkImage=e.flowImage,
Cesium.Material.PolylineTrailLinkSource="czm_material czm_getMaterial(czm_materialInput materialInput)\n                                                       {\n                                                            czm_material material = czm_getDefaultMaterial(materialInput);\n                                                            vec2 st = materialInput.st;\n                                                            vec4 colorImage = texture2D(image, vec2(fract(st.s - time), st.t));\n                                                            material.alpha = colorImage.a * color.a;\n                                                            material.diffuse = (colorImage.rgb+color.rgb)/2.0;\n                                                            return material;\n                                                        }",
Cesium.Material._materialCache.addMaterial(Cesium.Material.PolylineTrailLinkType,{fabric:{type:Cesium.Material.PolylineTrailLinkType,uniforms:{color:new Cesium.Color(1,0,0,.5),image:Cesium.Material.PolylineTrailLinkImage,time:0},
source:Cesium.Material.PolylineTrailLinkSource},translucent:function(e){return!0}})}return new Cesium.PolylineTrailLinkMaterialProperty(new Cesium.Color(1,0,0,.5),1e3)}},i.prototype.createPolylineTrailLinkMaterial=function(e,t){
if(Cesium)return Object.defineProperties(n.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:Cesium.createPropertyDescriptor("color")}),n.prototype.getType=function(e){
return"PolylineTrailLink"},n.prototype.getValue=function(e,t){return Cesium.defined(t)||(t={}),t.color=Cesium.Property.getValueOrClonedDefault(this._color,e,Cesium.Color.WHITE,t.color),t.time=((new Date).getTime()-this._time)%this.duration/this.duration,t
},n.prototype.equals=function(e){return this===e||e instanceof n&&Property.equals(this._color,e._color)},Cesium.PolylineTrailLinkMaterialPropertyRoad1=n,Cesium.Material.PolylineTrailLinkType="PolylineTrailLink",
Cesium.Material.PolylineTrailLinkImage="static/images/jt.png",
Cesium.Material.PolylineTrailLinkSource="czm_material czm_getMaterial(czm_materialInput materialInput)\n                                                {\n                                                    czm_material material = czm_getDefaultMaterial(materialInput);\n                                                    vec2 st = materialInput.st;\n                                                    vec4 colorImage = texture2D(image, vec2(fract(st.s - time), st.t));\n                                                    material.alpha = colorImage.a * color.a;\n                                                    material.diffuse = (colorImage.rgb+color.rgb)/2.0;\n                                                    return material;\n                                                }",
Cesium.Material._materialCache.addMaterial(Cesium.Material.PolylineTrailLinkType,{fabric:{type:Cesium.Material.PolylineTrailLinkType,uniforms:{color:new Cesium.Color(1,0,0,.5),image:Cesium.Material.PolylineTrailLinkImage,time:0,constantSpeed:300,
depthFailMaterial:!0},source:Cesium.Material.PolylineTrailLinkSource},translucent:function(e){return!0}}),new Cesium.PolylineTrailLinkMaterialPropertyRoad1(e,t);function n(e,t){this._definitionChanged=new Cesium.Event,this._color=void 0,
this._colorSubscription=void 0,this.color=e,this.duration=t,this._time=(new Date).getTime()}},i.prototype.createPolylineTrailLinkMaterialAdvance=function(e){if(Cesium)return Object.defineProperties(t.prototype,{isConstant:{get:function(){return!1}},
definitionChanged:{get:function(){return this._definitionChanged}},color:Cesium.createPropertyDescriptor("color")}),t.prototype.getType=function(e){return"PolylineTrailLink"},t.prototype.getValue=function(e,t){return Cesium.defined(t)||(t={}),
t.color=Cesium.Property.getValueOrClonedDefault(this._color,e,Cesium.Color.WHITE,t.color),t.image=this.image||Cesium.Material.PolylineTrailLinkImage,t.time=((new Date).getTime()-this._time)%this.duration/this.duration*this._d,t},
t.prototype.equals=function(e){return this===e||e instanceof t&&Property.equals(this._color,e._color)},Cesium.PolylineTrailLinkMaterialAdvanceProperty=t,Cesium.Material.PolylineTrailLinkType="PolylineTrailLink",
Cesium.Material.PolylineTrailLinkImage=e.flowImage||"static/images/effects/警戒线.png",
Cesium.Material.PolylineTrailLinkSource=" czm_material czm_getMaterial(czm_materialInput materialInput)\n                                                            {\n                                                                czm_material material = czm_getDefaultMaterial(materialInput);\n                                                                vec2 st = materialInput.st;\n                                                                vec4 colorImage = texture2D(image, vec2(fract(st.s - time), st.t));\n                                                                material.alpha = colorImage.a * color.a;\n                                                                material.diffuse = (colorImage.rgb+color.rgb)/2.0;\n                                                                return material;\n                                                            }",
Cesium.Material._materialCache.addMaterial(Cesium.Material.PolylineTrailLinkType,{fabric:{type:Cesium.Material.PolylineTrailLinkType,uniforms:{color:new Cesium.Color(0,0,1,.5),image:Cesium.Material.PolylineTrailLinkImage,time:-20},
source:Cesium.Material.PolylineTrailLinkSource},translucent:function(e){return!0}}),new Cesium.PolylineTrailLinkMaterialAdvanceProperty(Cesium.Color.WHITE,3e3,1,e.flowImage);function t(e,t,n,i){this._definitionChanged=new Cesium.Event,this._color=void 0,
this._colorSubscription=void 0,this.color=e,this.duration=t||3e3,this._time=(new Date).getTime(),this._d=n,this.image=i,this.isTranslucent=function(){return!0}}}},9155:(e,t)=>{function n(e,t){this._eventBus=t,this._init(e||{})}
Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.$inject=["config.map","eventBus"],n.prototype._init=function(e){var t=this._mapid=e.mapid;if(t){var n=this._L=e.L,i=n.map(t,{crs:n.CRS.EPSG4326,zoomControl:!1
}).setView([31.882427,120.562513],8);this.bLayers=n.layerGroup().addTo(i).setZIndex(100),this._map=i,this.addLayers(i),function(){
document.getElementsByClassName("iclient-leaflet-logo")[0]&&document.getElementsByClassName("iclient-leaflet-logo")[0].remove()
;document.getElementsByClassName("leaflet-control-attribution")[0]&&document.getElementsByClassName("leaflet-control-attribution")[0].remove()}()}},n.prototype.addLayers=function(e){this.tileLayers=this._L.layerGroup().addTo(e).setZIndex(150),
this.vecLayers=this._L.layerGroup().addTo(e).setZIndex(200),this.mLayers=this._L.layerGroup().addTo(e).setZIndex(250),this.mLayers.off(),this.tLayers=this._L.layerGroup().addTo(e).setZIndex(300),this.editLayers=new this._L.FeatureGroup,
this.editLayers.addTo(e).setZIndex(350),this.markers=this._L.layerGroup().addTo(e).setZIndex(400)}},6324:(e,t)=>{function n(){this.flows=[],this.step={remaining:!1,pauseIndex:-1}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,
n.prototype.fromJson=function(e){e instanceof Array&&e.length>0&&(this.flows=e)},n.prototype.assembly=function(e,t){var n=JSON.parse(JSON.stringify(e));n.forEach((function(n,i){n.duration=0===i?0:Number(e[i-1].duration),n.execute=function(){return t(n)}
})),this.flows=n},n.prototype.log=function(e){console.log(e)},n.prototype.start=function(){this.step.remaining=!1,this.excute()},n.prototype.excute=function(){var e=this,t=Promise.resolve();this.flows.forEach((function(n,i){t=t.then((function(){
return new Promise((function(t){!e.step.remaining&&e.step.pauseIndex<=i?setTimeout((function(){e.doAction(n,i),t()}),1e3*n.duration):t()}))}))}))},n.prototype.pause=function(){this.step.remaining=!0,this.step.pauseIndex=this.step.index},
n.prototype.stop=function(){this.step.remaining=!0,this.step.pauseIndex=-1},n.prototype.doAction=function(e,t){this.step.remaining||this.step.pauseIndex<t&&(this.step.index=t,e.execute())}},4181:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0})
;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=a
;var r=n(8342),o=Array.prototype.slice;function a(){this._listeners={},this.on("ccgis.destroy",1,this._destroy,this)}function u(){}a.prototype.on=function(e,t,n,i){if(e=(0,r.isArray)(e)?e:[e],(0,r.isFunction)(t)&&(i=n,n=t,t=1e3),!(0,
r.isNumber)(t))throw new Error("priority must be a number");var o=n;i&&((o=(0,r.bind)(n,i)).__fn=n.__fn||n);var a=this;e.forEach((function(e){a._addListener(e,{priority:t,callback:o,next:null})}))},a.prototype.once=function(e,t,n,i){var o=this;if((0,
r.isFunction)(t)&&(i=n,n=t,t=1e3),!(0,r.isNumber)(t))throw new Error("priority must be a number");function a(){var t=n.apply(i,arguments);return o.off(e,a),t}a.__fn=n,this.on(e,t,a)},a.prototype.off=function(e,t){e=(0,r.isArray)(e)?e:[e];var n=this
;e.forEach((function(e){n._removeListener(e,t)}))},a.prototype.createEvent=function(e){var t=new u;return t.init(e),t},a.prototype.fire=function(e,t){var n,r,a,s;if(s=o.call(arguments),"object"===(void 0===e?"undefined":i(e))&&(e=(t=e).type),
!e)throw new Error("no event type specified");if(r=this._listeners[e]){n=t instanceof u?t:this.createEvent(t),s[0]=n;var l=n.type;e!==l&&(n.type=e);try{a=this._invokeListeners(n,s,r)}finally{e!==l&&(n.type=l)}return void 0===a&&n.defaultPrevented&&(a=!1),a
}},a.prototype.handleError=function(e){return!1===this.fire("error",{error:e})},a.prototype._destroy=function(){this._listeners={}},a.prototype._invokeListeners=function(e,t,n){for(var i;n&&!e.cancelBubble;)i=this._invokeListener(e,t,n),n=n.next;return i},
a.prototype._invokeListener=function(e,t,n){var i;try{void 0!==(i=function(e,t){return e.apply(null,t)}(n.callback,t))&&(e.returnValue=i,e.stopPropagation()),!1===i&&e.preventDefault()}catch(e){
if(!this.handleError(e))throw console.error("unhandled error in event listener"),console.error(e.stack),e}return i},a.prototype._addListener=function(e,t){var n,i=this._getListeners(e);if(i){for(;i;){if(i.priority<t.priority)return t.next=i,
void(n?n.next=t:this._setListeners(e,t));n=i,i=i.next}n.next=t}else this._setListeners(e,t)},a.prototype._getListeners=function(e){return this._listeners[e]},a.prototype._setListeners=function(e,t){this._listeners[e]=t},
a.prototype._removeListener=function(e,t){var n,i,r,o=this._getListeners(e);if(t)for(;o;)n=o.next,(r=o.callback)!==t&&r.__fn!==t||(i?i.next=n:this._setListeners(e,n)),i=o,o=n;else this._setListeners(e,null)},u.prototype.stopPropagation=function(){
this.cancelBubble=!0},u.prototype.preventDefault=function(){this.defaultPrevented=!0},u.prototype.init=function(e){(0,r.assign)(this,e||{})}},6565:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0})
;var i=u(n(4181)),r=u(n(9155)),o=u(n(9148)),a=u(n(6324));function u(e){return e&&e.__esModule?e:{default:e}}t.default={__depends__:[],__init__:["engine","map","b3d"],map:["type",r.default],b3d:["type",o.default],engine:["type",a.default],
eventBus:["type",i.default]}}},n={};function i(e){if(n[e])return n[e].exports;var r=n[e]={exports:{}};return t[e](r,r.exports,i),r.exports}var r,o,a;o=i(7838),(a=(r=o)&&r.__esModule?r:{default:r}).default,window.CCG=a.default})();